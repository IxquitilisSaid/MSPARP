<!DOCTYPE html>
<html>
	<head>
	<title>MSPARP (BETA)</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- we responsive up in here -->
		<link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css" media="screen" />
		<link href="/static/css/chosen.min.css" rel="stylesheet" type="text/css" media="screen" />
		<link href="/static/css/colorpicker.css" rel="stylesheet" type="text/css" media="screen" />
		<link href="/static/css/home.css" rel="stylesheet" type="text/css" media="screen" />
		<script src="/static/js/modernizr.js"></script>
	</head>
	<body>
		<div class="container-fluid">
			<div class="row-fluid" id="header">
				<div class="span6">
					<h1>MSPARP</h1>
					<div id="random_greeting"></div>
				</div>
				<div class="span6">
				    <div class="alert alert-block alert-error fade-in">
					    <button type="button" class="close" data-dismiss="alert">&times;</button>
					    <h4>Maintenance</h4>
					    <p>In order to back up the database and check for any remaining issues, we'll be taking the site down for maintenance and <a href="http://www.timeanddate.com/worldclock/fixedtime.html?msg=Next+MSPARP+update&iso=20130720T14&p1=136&ah=1" target="_blank">9am EDT</a> for around an hour. Nothing should be lost during the maintenance, but please continue to back up any logs you'd like to keep just in case anything happens between now and then.</p>
				    </div>
				</div>
			</div>
			<div class="row-fluid">
				<div class="span10" id="char_form">
					<form action="{{url_for('save')}}" method="post" class="form-horizontal" data-validate="parsley">
						<div class="row-fluid">
							<div class="span6">
								<fieldset>
									<legend>> Set Chat Options</legend>
									<div class="control-group">
										<label for="character" class="control-label">> Be</label>
										<div class="controls">
											<select name="character" id="character" class="character-select chzn-select" data-placeholder="Choose a Character" data-required="true" data-error-message="YOU HAVE TO TYPE SOMETHING HERE, YOU FUCK.">
												<option value=""></option>
												{% for group in groups %}
												<optgroup label="{{group}}">
													{% for char in characters[group] %}
													<option value="{{char|lower}}" {% if char|lower==user.character['character'] %}selected="selected"{%endif%}>{{char}}</option>
													{% endfor %}
												</optgroup>
												{% endfor %}
											</select>
											{% if error=="character" %}
											<span class="error">Congratulations. You've somehow picked a character who doesn't exist. I'm not sure how you got here, but I guess you'll just have to try again.</span>
											{% endif %}
										</div>
										</div>
									<div class="control-group" class="control-label">
										<label for="picky" class="control-label">> <span>Pester</span></label>
										<div class="controls">
											<select name="picky" id="picky" class="character-select chzn-select" data-placeholder="Chat with..." multiple="multiple" data-required="true" data-error-message="WHAT, ARE YOU TRYING TO TALK TO YOURSELF, YOU MALADJUSTED PIECE OF SHIT?">
												<option value=""></option>
												{% for group in groups %}
												<optgroup label="{{group}}">
													{% for char in characters[group] %}
													<option value="{{char|lower}}" {% if char|lower in picky %}selected="selected"{%endif%}>{{char}}</option>
													{% endfor %}
												</optgroup>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="control-group">
										<label for="picky_exclude" class="control-label">> Exclude</label>
										<div class="controls">
											<select name="picky_exclude" id="picky_exclude" class="character-select chzn-select" data-placeholder="Don't chat with..." multiple="multiple">
												<option value=""></option>
												{% for group in groups %}
												<optgroup label="{{group}}">
													{% for char in characters[group] %} 
													<option value="{{char|lower}}" {% if char|lower in picky_exclude %}selected="selected"{%endif%}>{{char}}</option>
													{% endfor %}
												</optgroup>
												{% endfor %}
											</select>
											<a href="#" id="exclude_help" title="chat with characters you selected, unless they appear in this list">[?]</a></label>
										</div>
									</div>
								</fieldset>
								<fieldset>
									<legend>> Customize Quirk</legend>
									<div class="control-group">
										<label for="case" class="control-label">> Set Typing Case</label>
										<div class="controls">
											<select name="case" id="case" class="chzn-select" data-required="true">
												{% for case in case_options.items()|sort %}
												<option value="{{case[0]}}"{% if case[0]==user.character['case'] %} selected="selected"{%endif%}>{{case[1]}}</option>
												{% endfor %}
											</select>
											{% if error=="case" %}
											<span class="error">Congratulations. You've somehow picked a case option which doesn't exist. I'm not sure how you got here, but I guess you'll just have to try again.</span><br />{% endif %}
										</div>
									</div>
									<div class="control-group">
										<label for="quirk_prefix" class="control-label">> Set Prefix</label>
										<div class="controls">
											<input type="text" id="quirk_prefix" name="quirk_prefix" maxlength="10" value="{{user.character['quirk_prefix']}}" class="span4 charsleft" />
											<span class="help-inline"><span>0</span> left</span>
										</div>
									</div>
									<div class="control-group">
										<label for="quirk_suffix" class="control-label">> Set Suffix</label>
										<div class="controls">
											<input type="text" id="quirk_suffix" name="quirk_suffix" maxlength="10" value="{{user.character['quirk_suffix']}}" class="span4 charsleft" />
											<span class="help-inline"><span>0</span> left</span>
										</div>
									</div>
									<!-- quirks -->
									<div class="control-group replacements" id="replacements">
										<label for="quirk_from" class="control-label">> Replace Letters</label>
										<div class="controls">
											<input type="text" name="quirk_from" class="span4" placeholder="" value="" />
											<span class="with"> with </span>
											<input type="text" name="quirk_to" class="span4" placeholder="" value="" />
											<a href="#" class="close" tabindex="-1">&times;</a>
											<a href="#" class="close add" tabindex="-1">+</a>
										</div>
										{% if replacements|length!=0 %}
										{% for replacement in replacements %}
										<div class="controls"><input type="text" name="quirk_from" class="span4" placeholder="" value="{{replacement[0]}}" /><span class="with"> with </span><input type="text" name="quirk_to" class="span4" placeholder="" value="{{replacement[1]}}" /><a href="#" class="close" tabindex="-1">&times;</a><a href="#" class="close add" tabindex="-1">+</a></div>
										{% endfor %}
										{% else %}
										{% endif %}
									</div>
									<div class="control-group replacements" id="regex_replacements">
										<label for="quirk_from" class="control-label">> Replace Patterns</label>
										<div class="controls">
											<input type="text" name="regex_from" class="span4" placeholder="" value="" />
											<span class="with"> with </span>
											<input type="text" name="regex_to" class="span4" placeholder="" value="" />
											<a href="#" class="close" tabindex="-1">&times;</a>
											<a href="#" class="close add" tabindex="-1">+</a>
										</div>
										{% if regexes|length!=0 %}
										{% for regex in regexes %}
										<div class="controls"><input type="text" name="regex_from" class="span4" placeholder="" value="{{regex[0]}}" /><span class="with"> with </span><input type="text" name="regex_to" class="span4" placeholder="" value="{{regex[1]}}" /><a href="#" class="close" tabindex="-1">&times;</a><a href="#" class="close add" tabindex="-1">+</a></div>
										{% endfor %}
										{% else %}
										{% endif %}
									</div>
								</fieldset>
							</div>
							<div class="span6">
								<fieldset>
									<legend>> Set Text Options</legend>
									<div class="control-group">
										<label for="acronym" class="control-label">> Choose Acronym</label>
										<div class="controls">
											<input type="text" name="acronym" id="acronym" maxlength="15" placeholder="??" value="{{user.character['acronym']}}" class="span6 charsleft" data-required="true" data-required-message="SHORTEN YOUR BORING, STUPID NAME AND TYPE IT HERE." />
											<span class="help-inline"><span>0</span> left</span>
										</div>
									</div>
									<div class="control-group">
										<label for="name" class="control-label">> Choose Name</label>
										<div class="controls">
											<input type="text" name="name" id="name" placeholder="anonymous" value="{{user.character['name']}}" class="span8"  data-required="true" data-minlength="3" data-minlength-message="YOUR NAME IS LESS THAN %s LETTERS? I CALL BULLSHIT. TYPE IN A LONGER ONE, SCUMBAG." data-required-message="IT'S NOT MY PROBLEM YOU'RE ASHAMED OF YOUR NAME. TYPE, HUMAN." />
										</div>
									</div>
									<div class="control-group">
										<label for="color" class="control-label">> Choose Color</label>
										<div class="controls">
											<div class="input-prepend">
												<span class="add-on">#</span>
												<input type="text" value="000000" name="color" id="color" class="span4" maxlength="6" data-required="true" value="{{user.character['color']}}" data-regexp="[A-Fa-f0-9]{6}" data-required-message="YOU TOOK THE TIME TO DELETE THIS COLOR? WHAT IS WRONG WITH YOU?" data-regexp-message="THAT IS THE SHITTIEST COLOR I'VE SEEN IN SWEEPS. ARE YOU PROUD OF YOURSELF, ASSWIPE?" />
											</div>
										</div>
									</div>
									<div class="control-group">
										<span id="text_preview" class="span12">
											<span class="acronym"><span>??</span>: </span>
											<span class="quote">
												<span class="quirk_prefix"></span> 
												<span class="sentence">The quick brown fox jumps over the lazy dog.</span> 
												<span class="quirk_suffix"></span>
											</span>
										</span>
									</div>
								</fieldset>
								<fieldset>
									<legend>> Make This Hapen</legend>
									<div class="control-group">
										 <a id="save_modal" class="btn" data-toggle="modal" data-target="#modal_savedata">> Save</a>
										 <a id="load_modal" class="btn" data-toggle="modal" data-target="#modal_loaddata">> Load</a>
										 <a id="manage_modal" class="btn" data-toggle="modal" data-target="#modal_managedata">> Manage</a>
										 <button type="submit" class="btn btn-primary">> Chat</button>
									</div>
								</fieldset>
							</div>
						</div>
					</form>
				</div>
				<div class="span2" id="sidebar">
					<h2>Stats</h2>
					<ul id="load_stats">
						<li class="online">Online: <span class="badge badge-inverse">{{users_searching+users_chatting}}</span></li>
						<li class="searching">Searching: <span class="badge badge-inverse">{{users_searching}}</span></li>
						<li class="chatting">Chatting: <span class="badge badge-inverse">{{users_chatting}}</span></li>
					</ul>

					<h2>Links</h2>
					<ul id="site_links">
						<li><a href="/static/user-guide.html">User Guide</a></li>
						<li><a href="http://msparp.tumblr.com/">Tumblr</a></li>
						<li><a href="http://msparp.uservoice.com/">Suggestions?</a></li>
						<li><a href="http://msparp-forums.org/">Forums</a></li>
						<li><a href="https://docs.google.com/forms/d/1f5VPB2xQelQQIpH0_wU6TfCUXdNX_Rq44CEwbc4z7FQ/viewform" target="_blank">Volunteer</a></li>
					</ul>
					<!--
					<h2>Trollplay</h2>
					<p>Here for Trollmegle? If so, you don't give a crap about any of those options over there...</p>
					<form action="/save" method="post">
						<button class="btn" type="button">> Chat</button>
					</form>
					-->
				</div>
			</div>
		</div>

		<!-- Modals -->
		<div id="modal_savedata" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="modal_savelabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
				<h3 id="modal_savelabel">Save Personas</h3>
			</div>
			<div class="modal-body">
				<p>A <strong>persona</strong> is a set of all the preferences you set on this page (including who you want to chat with). In the future, you can load this persona and get right to chatting. <span id="save_overwrite" class="text-error">Saving a persona with a name from the dropdown below will overwrite the existing persona.</span></p>
				<form class="form-horizontal">
					 <div class="control-group">
						 <label class="control-label" for="save_persona">Save Over a Persona</label>
						 <div class="controls">
							<select name="save_persona" id="save_persona" class="character-select chzn-select">
							</select>
						 </div>
					</div>
					<div class="control-group">
						<label class="control-label" for="save_new">New Persona Name</label>
						 <div class="controls">
							<input type="text" name="save_new" id="save_new" class="" />
						 </div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">> Close</button>
				<button class="btn btn-primary" data-dismiss="modal" id="save_data">> Save</button>
			</div>
		</div>

		<div id="modal_loaddata" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="modal_loadlabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
				<h3 id="modal_loadlabel">Load Personas</h3>
			</div>
			<div class="modal-body">
				<p>These personas have been saved in this browser. Select one to load the preferences associated with that persona.</p>
				<form class="form-horizontal">
					 <div class="control-group">
						<label class="control-label" for="load_persona">Persona Name</label>
						<div class="controls">
							<select name="load_persona" id="load_persona" class="character-select chzn-select">
							</select>
						 </div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">> Close</button>
				<button class="btn btn-primary" data-dismiss="modal" id="load_data">> Load</button>
			</div>
		</div>

		<div id="modal_managedata" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="modal_managelabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
				<h3 id="modal_loadlabel">Manage Personas</h3>
			</div>
			<div class="modal-body">
				<p>These personas have been saved in this browser. Select one to rename or delete it. </p>
				<form class="form-horizontal">
					 <div class="control-group">
						<label class="control-label" for="manage_persona">Persona Name</label>
						<div class="controls">
							<select name="manage_persona" id="manage_persona" class="character-select chzn-select">
							</select>
						 </div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">> Close</button>
				<button class="btn btn-danger" data-dismiss="modal" aria-hidden="true" id="clear_localStorage">> Clear</button>
				<button class="btn btn-info" data-dismiss="modal" aria-hidden="true" id="import_personas">> Import / Export</button>
				<button class="btn btn-primary" data-dismiss="modal" id="manage_data">> Save</button>
			</div>
		</div>
		<!-- JavaScripts -->
		<script type="text/javascript" language="javascript" src="/static/js/jquery.min.js"></script>
		<script type="text/javascript" language="javascript" src="/static/js/parsely.js"></script>
		<script type="text/javascript" language="javascript" src="/static/js/chosen.jquery.js"></script>
		<script type="text/javascript" language="javascript" src="/static/js/bootstrap.js"></script>
		<script type="text/javascript" language="javascript" src="/static/js/colorpicker.js"></script>
		<script type="text/javascript" language="javascript" src="/static/js/characters.js"></script>
		<script type="text/javascript" language="javascript" src="/static/js/home.js"></script>
		<!--
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			
			ga('create', 'UA-42087625-1', 'msparp.com');
			ga('send', 'pageview');
		</script>
		-->
	</body>
</html>
